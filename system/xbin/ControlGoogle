#!/system/bin/sh

MainGoogleList="com.google.android.gms/com.google.android.gms.analytics.service.AnalyticsService com.google.android.gms/com.google.android.gms.analytics.AnalyticsService com.google.android.gms/com.google.android.location.internal.AnalyticsUploadIntentService com.google.android.gms/com.google.android.gms.ads.AdRequestBrokerService com.google.android.gms/com.google.android.gms.ads.identifier.service.AdvertisingIdNotificationService com.google.android.gms/com.google.android.gms.ads.identifier.service.AdvertisingIdService com.google.android.gms/com.google.android.gms.ads.cache.CacheBrokerService com.google.android.gms/com.google.android.gms.ads.social.GcmSchedulerWakeupService com.google.android.gms/com.google.android.gms.ads.measurement.GmpConversionTrackingBrokerService com.google.android.gms/com.google.android.gms.ads.GservicesValueBrokerService com.google.android.gms/com.google.android.gms.ads.jams.NegotiationService com.google.android.gms/com.google.android.contextmanager.service.ContextManagerService com.google.android.gms/com.google.android.gms.deviceconnection.service.DeviceConnectionWatcherService com.google.android.gms/com.google.android.gms.herrevad.services.CaptivePortalReportService com.google.android.gms/com.google.android.gms.herrevad.services.ImmediateProcessReportsService com.google.android.gms/com.google.android.gms.herrevad.services.ImmediateRemoteReportsRefreshService com.google.android.gms/com.google.android.gms.herrevad.services.LightweightNetworkQualityAndroidService com.google.android.gms/com.google.android.gms.herrevad.services.LightweightNetworkQualityWorkerService com.google.android.gms/com.google.android.gms.herrevad.services.NetworkQualityWorkerService com.google.android.gms/com.google.android.gms.herrevad.services.ProcessReportsService com.google.android.gms/com.google.android.gms.herrevad.services.RemoteReportsRefreshService com.google.android.gms/com.google.android.gms.common.stats.GmsCoreStatsService com.google.android.gms/com.google.android.gms.nearby.messages.debug.DebugPokeService com.google.android.gms/com.google.android.gms.nearby.discovery.service.DiscoveryService com.google.android.gms/com.google.android.gms.nearby.discovery.ui.DiscoveryTileService com.google.android.gms/com.google.android.gms.nearby.bootstrap.service.NearbyBootstrapService com.google.android.gms/com.google.android.gms.nearby.connection.service.NearbyConnectionsAndroidService com.google.android.gms/com.google.location.nearby.direct.service.NearbyDirectService com.google.android.gms/com.google.android.gms.nearby.messages.service.NearbyMessagesService com.google.android.gms/com.google.android.gms.nearby.messages.service.PeriodicCacheWarmingService com.google.android.gms/com.google.android.gms.nearby.discovery.service.ScreenOnListenerService com.google.android.gms/com.google.android.gms.security.snet.SafeBrowsingUpdateTaskService com.google.android.gms/com.google.android.gms.security.snet.SafetyNetClientService com.google.android.gms/com.google.android.gms.security.snet.SnetIdleTaskService com.google.android.gms/com.google.android.gms.chimera.SnetIntentOperationService com.google.android.gms/com.google.android.gms.security.snet.SnetNormalTaskService com.google.android.gms/com.google.android.gms.security.snet.SnetService  com.google.android.gms/com.google.android.gms.gcm.http.GoogleHttpService com.google.android.gms/com.google.android.gms.droidguard.DroidGuardGcmTaskService com.google.android.gms/com.google.android.gms.droidguard.DroidGuardService com.google.android.gms/com.google.android.gms.icing.proxy.IcingInternalCorporaUpdateService com.google.android.gms/com.google.android.gms.update.SystemUpdateGcmTaskService com.google.android.gms/com.google.android.gms.update.SystemUpdateService com.google.android.gms/com.google.android.gms.update.UpdateFromSdCardService  com.google.android.gms/com.google.android.gms.icing.service.AppIndexingService com.google.android.gms/com.google.android.gms.icing.GcmReceiverService  com.google.android.gms/com.google.android.gms.icing.service.IcingGcmTaskService com.google.android.gms/com.google.android.gms.icing.service.IndexService com.google.android.gms/com.google.android.gms.icing.service.IndexWorkerService com.google.android.gms/com.google.android.gms.icing.mdh.service.MobileDataHubGcmTaskService com.google.android.gms/com.google.android.gms.icing.mdh.service.MobileDataHubService com.google.android.gms/com.google.android.gms.icing.indexapi.OneoffRebuildIndexService com.google.android.gms/com.google.android.gms.icing.indexapi.PeriodicRebuildIndexService";

FitnessGoogleList="com.google.android.gms/com.google.android.gms.fitness.sensors.sample.CollectSensorService com.google.android.gms/com.google.android.gms.fitness.cache.DataUpdateListenerCacheService com.google.android.gms/com.google.android.gms.fitness.service.ble.FitBleBroker com.google.android.gms/com.google.android.gms.fitness.service.config.FitConfigBroker com.google.android.gms/com.google.android.gms.fitness.service.goals.FitGoalsBroker com.google.android.gms/com.google.android.gms.fitness.service.history.FitHistoryBroker com.google.android.gms/com.google.android.gms.fitness.service.internal.FitInternalBroker com.google.android.gms/com.google.android.gms.fitness.service.proxy.FitProxyBroker com.google.android.gms/com.google.android.gms.fitness.service.recording.FitRecordingBroker com.google.android.gms/com.google.android.gms.fitness.service.sensors.FitSensorsBroker com.google.android.gms/com.google.android.gms.fitness.service.sessions.FitSessionsBroker com.google.android.gms/com.google.android.gms.fitness.sync.FitnessSyncAdapterService com.google.android.gms/com.google.android.gms.fitness.store.maintenance.StoreMaintenanceService com.google.android.gms/com.google.android.gms.fitness.service.wearable.WearableSyncAccountService com.google.android.gms/com.google.android.gms.fitness.service.wearable.WearableSyncConfigService com.google.android.gms/com.google.android.gms.fitness.service.wearable.WearableSyncConnectionService com.google.android.gms/com.google.android.gms.fitness.service.wearable.WearableSyncMessageService com.google.android.gms/com.google.android.gms.fitness.wearables.WearableSyncService";

BTservList="com.android.bluetooth/com.android.bluetooth.pan.PanService com.android.bluetooth/com.android.bluetooth.hfp.HeadsetService com.android.bluetooth/com.android.bluetooth.btservice.AdapterService com.android.bluetooth/com.android.bluetooth.a2dp.A2dpService com.android.bluetooth/com.android.bluetooth.gatt.GattService";

OthersGoogleList="com.google.android.gms/com.google.android.gms.usagereporting.service.UsageReportingIntentService com.google.android.gms/com.google.android.gms.usagereporting.service.UsageReportingService";

case $1 in

--help|"")
    echo "Usage: ControlGoogle [-m] [-f] [-e]\n";
    echo "Controls unneeded Google Services by disabling them.\n";
    echo "Also can enable the services back\n";
    echo "  -m, --main			Disable main Google Services";
    echo "  -f, --fitness			Disable fitness/wearable Google Services";
    echo "  -e, --enable			Enable back all Google Services";
    echo "  --help			Display this help and exit\n";
    return;;
	
--main|-m)
	for googleservice in $MainGoogleList; do
		#su -c "am stopservice $googleservice &> /dev/null";
		#su -mm -c "pm disable-until-used --user 1002 $googleservice &> /dev/null";
		su -mm -c "pm disable $googleservice &> /dev/null";
	done;
	echo "All Services Disabled!"
    choice=1;;

--fitness|-f)
	for googleservice in $FitnessGoogleList; do
		#su -c "am stopservice $googleservice &> /dev/null";
		#su -mm -c "pm disable-until-used --user 1002 $googleservice &> /dev/null";
		su -mm -c "pm disable $googleservice &> /dev/null";
	done; 
	echo "Fitness Disabled!"
	choice=2;;

--enable|-e)
	for googleservice in $MainGoogleList; do
		su -mm -c "pm enable $googleservice &> /dev/null";
	done; 
	
	for googleservice in $FitnessGoogleList; do
		su -mm -c "pm enable $googleservice &> /dev/null";
	done;
	
	for googleservice in $OthersGoogleList; do
		su -mm -c "pm enable $googleservice &> /dev/null";
	done;
	echo "All Services Enabled!"
	choice=3;;

--bluetooth|-b)
	for btservice in $BTservList; do
	su -c "am stopservice $btservice &> /dev/null";
	su -mm -c "pm disable-until-used --user 1002 $btservice &> /dev/null";
	done;
	echo "Bluetooth Disabled!"
	choice=4;;
	
--others|-o)
	for otherservice in $OthersGoogleList; do
	su -c "am stopservice $otherservice &> /dev/null";
	su -mm -c "pm disable-until-used --user 1002 $otherservice &> /dev/null";
	done;
	echo "Other Important Google Services Disabled!"
	choice=5;;	
  *)
    echo "Wrong key...";

esac;